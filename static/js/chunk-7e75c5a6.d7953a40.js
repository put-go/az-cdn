(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e75c5a6"],{"04b6":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"auth-container"},[a("div",{staticClass:"auth-box"},[a("rocket"),a("a-form-model",{ref:"refForm",staticClass:"right-form",attrs:{model:t.formModel,rules:t.formRules},on:{submit:function(e){return e.preventDefault(),t.onResetPassword(e)}}},[a("div",{staticClass:"wrapper"},[a("h2",{staticClass:"title"},[t._v(" "+t._s(t.$t("找回密码"))+" "),a("b",[t._v(t._s(t.$t("使用邮箱找回")))])]),a("div",{staticClass:"tip",staticStyle:{"margin-bottom":"30px"}},[a("router-link",{staticClass:"blu",attrs:{to:"/login"}},[t._v(t._s(t.$t("返回登录")))])],1),a("a-form-model-item",{staticClass:"control",attrs:{label:t.$t("邮箱"),prop:"email"}},[a("a-input",{staticClass:"input",attrs:{size:"large",placeholder:t.$t("请输入邮箱"),"allow-clear":""},model:{value:t.formModel.email,callback:function(e){t.$set(t.formModel,"email",e)},expression:"formModel.email"}})],1),a("a-form-model-item",{staticClass:"control",attrs:{label:t.$t("验证码"),prop:"emailCode"}},[a("a-input",{staticClass:"input",attrs:{size:"large","max-length":32,placeholder:t.$t("请输入验证码")},model:{value:t.formModel.emailCode,callback:function(e){t.$set(t.formModel,"emailCode",e)},expression:"formModel.emailCode"}},[a("a-button",{staticStyle:{width:"110px"},attrs:{slot:"suffix",type:"primary",loading:t.loading2,disabled:t.seconds>0},on:{click:function(e){return t.onEmailSend()}},slot:"suffix"},[t._v(" "+t._s(t.seconds>0?t.$t("重新发送")+"("+parseInt(t.seconds)+")":t.$t("发送"))+" ")])],1)],1),a("a-form-model-item",{staticClass:"control",attrs:{label:t.$t("密码"),prop:"password"}},[a("a-input",{staticClass:"input",attrs:{type:"password",size:"large","max-length":64,placeholder:t.$t("请输入密码"),"allow-clear":""},model:{value:t.formModel.password,callback:function(e){t.$set(t.formModel,"password",e)},expression:"formModel.password"}})],1),a("a-form-model-item",{staticClass:"control",attrs:{label:t.$t("确认密码"),prop:"password2"}},[a("a-input",{staticClass:"input",attrs:{type:"password",size:"large","max-length":64,placeholder:t.$t("请确认密码"),"allow-clear":""},model:{value:t.formModel.password2,callback:function(e){t.$set(t.formModel,"password2",e)},expression:"formModel.password2"}})],1),a("a-button",{staticClass:"btn",staticStyle:{"margin-top":"30px"},attrs:{type:"primary",block:"",loading:t.loading,size:"large","html-type":"submit"}},[t._v(" "+t._s(t.$t("重置密码"))+" ")])],1)])],1),a("a-modal",{attrs:{visible:t.visible,centered:"",footer:null},on:{cancel:function(e){t.visible=!1}}},[a("div",{staticStyle:{height:"80px"},attrs:{id:"recaptcha"}})])],1)},o=[],i=a("c7eb"),r=a("1da1"),n=a("5530"),l=(a("d9e2"),a("14d9"),a("62d0")),c=a("f146"),d=(a("686c"),a("5a0c")),u=a.n(d),m=a("12cb"),p=a("79b8"),f=a("2f62"),h={name:"ResetPassword",components:{Rocket:c["a"]},data:function(){var t=this,e=function(e,a,s){a===t.formModel.password?s():s(new Error(m["a"].t("两次输入的密码不一致")))};return{loading:!1,loading2:!1,seconds:0,visible:!1,formModel:{email:"",emailCode:"",password:"",password2:"",captchaData:""},formRules:{email:[{required:!0,message:m["a"].t("请输入邮箱"),trigger:"blur"},{type:"email",message:m["a"].t("邮箱格式错误"),trigger:"blur"}],password:[{required:!0,message:m["a"].t("请输入密码"),trigger:"blur"},{min:8,message:m["a"].t("密码至少为8个字符"),trigger:"blur"}],password2:[{required:!0,message:m["a"].t("请确认密码"),trigger:"blur"},{min:8,message:m["a"].t("密码至少为8个字符"),trigger:"blur"},{validator:e,trigger:"blur"}],emailCode:[{required:!0,message:m["a"].t("请输入验证码"),trigger:"blur"}]}}},computed:Object(n["a"])({},Object(f["b"])("auth",["globalConfig"])),mounted:function(){var t=this.$ls.get("FindTimer");if(t){var e=60-(u()().valueOf()-t)/1e3;console.log("duration",e,u()().valueOf(),t),e>0?this.countdownTimer(e):this.$ls.remove("FindTimer")}},methods:{loadGoogleCaptcha:function(){var t=this;this.visible=!0,this.$nextTick((function(){Object(p["a"])(["https://www.google.com/recaptcha/api.js?onload=onloadCallback2&render=explicit"],"google-recaptcha2"),window.onloadCallback2=function(){t.wid=window.grecaptcha.render("recaptcha",{sitekey:t.globalConfig.recaptcha_site_key,callback:function(){t.visible=!1,t.formModel.captchaData=window.grecaptcha.getResponse(t.wid),window.grecaptcha.reset(t.wid),t.onEmailSend(!0)}})}}))},countdownTimer:function(t){var e=this;this.seconds=t;var a=setInterval((function(){e.seconds--,e.seconds<=0&&(clearInterval(a),e.$ls.remove("FindTimer"))}),1e3)},onEmailSend:function(t){var e=this,a=this.formModel.email;this.$refs.refForm.validateField("email",function(){var s=Object(r["a"])(Object(i["a"])().mark((function s(o){var r;return Object(i["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!o){s.next=2;break}return s.abrupt("return");case 2:if(!e.globalConfig.is_recaptcha||t){s.next=5;break}return e.loadGoogleCaptcha(),s.abrupt("return");case 5:return e.loading2=!0,s.prev=6,s.next=9,Object(l["f"])({email:a,recaptcha_data:e.formModel.captchaData});case 9:r=s.sent,!0===r.data&&(e.$message.success(e.$t("验证码发送成功，如未收到请检查垃圾邮件")),e.$ls.set("FindTimer",u()().valueOf()),e.countdownTimer(60)),s.next=15;break;case 13:s.prev=13,s.t0=s["catch"](6);case 15:e.loading2=!1;case 16:case"end":return s.stop()}}),s,null,[[6,13]])})));return function(t){return s.apply(this,arguments)}}())},onResetPassword:function(){var t=this,e=this.formModel,a=e.email,s=e.password,o=e.emailCode;this.$refs.refForm.validate(function(){var e=Object(r["a"])(Object(i["a"])().mark((function e(r){return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=16;break}return t.loading=!0,window.conso1e.log(215),e.prev=3,e.next=6,Object(l["e"])({email:a,password:s,email_code:o});case 6:t.$message.success(t.$t("密码重置成功，请登录")),t.$router.push("/login"),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](3);case 12:t.loading=!1,window.conso1e.log(3),e.next=17;break;case 16:return e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}())}}},g=h,b=a("2877"),w=Object(b["a"])(g,s,o,!1,null,null,null);e["default"]=w.exports},1:function(t,e){},"686c":function(t,e,a){},f146:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rocket-container left-img"},[a("div",{staticClass:"warp"},[a("div",{staticClass:"img",on:{click:function(e){return t.$router.push("/")}}},[t.rocketOptions.animationData?a("lottie",{staticClass:"in",attrs:{options:t.rocketOptions,height:640,width:640},on:{animCreated:t.handleAnimation}}):t._e()],1),a("div",{staticClass:"txt"},[a("h2",{staticClass:"tit"},[t._v(t._s(t.descTitles[0]||""))]),a("p",{staticClass:"desc"},[t._v(t._s(t.descTitles[1]||""))])])])])},o=[],i=a("8c2c"),r=a("bc3a"),n=a.n(r),l=a("54d7"),c={name:"Rocket",components:{Lottie:i["a"]},data:function(){return{anim:{},rocketOptions:{animationData:null}}},computed:{descTitles:function(){return this.$appDesc.split("\n")}},mounted:function(){var t=this;window.conso1e.log(258),setTimeout((function(){n.a.get(l["n"]+"/83245-rocket-launch.json").then((function(e){t.rocketOptions.animationData=e.data}))}),0)},methods:{handleAnimation:function(t){this.anim=t,this.anim.setSpeed(.6)}}},d=c,u=a("2877"),m=Object(u["a"])(d,s,o,!1,null,null,null);e["a"]=m.exports}}]);