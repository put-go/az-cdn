(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-79e2d36c"],{"25b2":function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));var n=e("77fe"),r=e("12cb"),s=new n["a"]({WAIT_PAY:[0,r["a"].t("待支付")],OPENING:[1,r["a"].t("开通中")],CANCEL:[2,r["a"].t("已取消")],END:[3,r["a"].t("已完成")]})},"4d6b":function(t,a,e){"use strict";e("98ab")},"77fe":function(t,a,e){"use strict";var n=e("d4ec"),r=e("bee2"),s=(e("d3b7"),e("159b"),e("b64b"),e("d81d"),e("7db0"),function(){function t(a){Object(n["a"])(this,t),this.defination=a,this.parseDefination()}return Object(r["a"])(t,[{key:"parseDefination",value:function(){var t=this;Object.keys(this.defination).forEach((function(a){t[a]=t.defination[a][0]}))}},{key:"toArray",value:function(){var t=this,a=Object.keys(this.defination).map((function(a){var e=t.defination[a];return{value:e[0],label:e[1]}}));return a}},{key:"getLabel",value:function(t){var a,e;return null!==(a=null===(e=this.toArray().find((function(a){return String(a.value)===String(t)})))||void 0===e?void 0:e.label)&&void 0!==a?a:""}}]),t}());a["a"]=s},"7db0":function(t,a,e){"use strict";var n=e("23e7"),r=e("b727").find,s=e("44d2"),i="find",c=!0;i in[]&&Array(1)[i]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),s(i)},"89cf":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"order-info"},[t.orderData?e("a-row",{attrs:{gutter:[30,30]}},[e("a-col",{attrs:{md:24,lg:14}},[e("div",{staticClass:"order-main use-shadow"},[e("div",{staticClass:"g-group"},[e("div",{staticClass:"header"},[t._v(t._s(t.$t("订单详情")))]),e("div",{staticClass:"items"},[e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("订单号"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t.orderData.trade_no))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("创建时间"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t._f("datetime")(t.orderData.created_at)))])])]),t.orderData.status===t.States.WAIT_PAY?e("button",{directives:[{name:"wave",rawName:"v-wave"}],staticClass:"btn-cancel n-button color-3",attrs:{type:"button"},on:{click:t.onCancel}},[e("svg-icon",{attrs:{name:"x"}}),t._v(" "+t._s(t.$t("取消订单"))+" ")],1):t._e()]),e("a-divider"),e("div",{staticClass:"g-group"},[e("div",{staticClass:"header"},[t._v(t._s(t.$t("商品详情")))]),e("div",{staticClass:"items"},[e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("商品名称"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t.orderData.plan.name))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("类型/周期"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t.orderData.periodLabel))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("产品流量"))+":")]),e("span",{staticClass:"value"},[t._v(" "+t._s(t._f("flow")(t.orderData.flowValue))+t._s("onetime_price"===t.orderData.period?"":"/"+t.$t("每月"))+" ")])])]),e("div",{staticClass:"tag-state2"},[e("span",[t._v(t._s(t.orderStateLabel))])])]),t.orderData.status===t.States.WAIT_PAY?[e("a-divider"),e("div",{staticClass:"g-group"},[e("div",{staticClass:"header"},[t._v(t._s(t.$t("支付方式")))]),e("div",{staticClass:"items"},t._l(t.payments,(function(a){return e("div",{key:a.id,staticClass:"item",style:{width:t.paymentWidth},on:{click:function(e){t.payType=a.id}}},[e("button",{directives:[{name:"wave",rawName:"v-wave"}],staticClass:"btn-payment",class:{"is-active":t.payType===a.id},attrs:{type:"button"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:a.icon,expression:"item.icon"}],attrs:{src:a.icon,width:"30"}}),t._v(" "+t._s(a.name)+" "),a.handling_fee_percent?[t._v("("+t._s(a.handling_fee_percent+"%")+t._s(t.$t("手续费"))+")")]:t._e()],2)])})),0)])]:t._e()],2)]),e("a-col",{attrs:{md:24,lg:10}},[e("div",{staticClass:"order-side use-shadow"},[e("div",{staticClass:"g-group"},[e("div",{staticClass:"header"},[t._v(t._s(t.$t("订单摘要")))]),e("div",{staticClass:"items"},[e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("商品价格"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t._f("amount")(t.orderData.plan[t.orderData.period])))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("余额支付"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t._f("amount")(t.orderData.balance_amount)))])]),e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("抵扣金额"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t._f("amount")(t.orderData.discount_amount)))])]),t.orderData.surplus_amount>0?e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("折抵金额"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t._f("amount")(t.orderData.surplus_amount)))])]):t._e(),t.orderData.refund_amount>0?e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("退款金额"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t._f("amount")(t.orderData.refund_amount)))])]):t._e(),e("div",{staticClass:"item"},[e("span",{staticClass:"tit"},[t._v(t._s(t.$t("总计"))+":")]),e("span",{staticClass:"value"},[t._v(t._s(t._f("amount")(t.orderData.total_amount)))])])])]),t.orderData.status===t.States.WAIT_PAY?[e("a-divider"),e("div",{staticClass:"g-btns"},[e("a-button",{directives:[{name:"wave",rawName:"v-wave"}],staticClass:"btn",attrs:{icon:"shopping-cart",loading:t.loading,type:"primary"},on:{click:t.onCallPay}},[t._v(" "+t._s(t.$t("立即支付"))+" ")])],1)]:t._e()],2)])],1):e("div",{staticClass:"spin-loading"},[e("a-spin",{attrs:{size:"large"}})],1)],1)},r=[],s=e("c7eb"),i=e("1da1"),c=(e("d81d"),e("13d5"),e("d3b7"),e("b0c0"),e("7db0"),e("ac1f"),e("5319"),e("c678")),o=e("a1fc"),u=e("25b2"),l=e("f248"),d=e.n(l),v={name:"OrderInfo",data:function(){return{orderData:null,payments:[],payType:"",loading:!1,States:u["a"]}},computed:{orderStateLabel:function(){return u["a"].getLabel(this.orderData.status)},paymentWidth:function(){var t=Math.max.apply(null,this.payments.map((function(t){var a=t.name.split("").reduce((function(t,a){return t+(a.charCodeAt(0)>127?15:10)}),0);return t.handling_fee_percent>0?a+120:a})));return t+70+"px"}},mounted:function(){this.getOrderData(),this.getPayments(),this.$store.dispatch("auth/getUserInfo")},methods:{getOrderData:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var e,n,r,i;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["c"])(t.$route.query.id);case 2:r=a.sent,i=null!==(e=r.data)&&void 0!==e?e:{},i.periodLabel=null===(n=o["c"].find((function(t){return t.key===i.period})))||void 0===n?void 0:n.label2,i.flowValue=d.a.parse(i.plan.transfer_enable+"GB"),t.orderData=i;case 7:case"end":return a.stop()}}),a)})))()},getPayments:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var e,n;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["e"])();case 2:n=a.sent,t.payments=null!==(e=n.data)&&void 0!==e?e:[],t.payments.length>0&&(t.payType=t.payments[0].id);case 5:case"end":return a.stop()}}),a)})))()},onCancel:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:window.conso1e.log(127),t.$confirm({title:t.$t("注意"),content:t.$t("确定要取消该订单吗？"),onOk:function(){var a=Object(i["a"])(Object(s["a"])().mark((function a(){var e;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(c["a"])(t.orderData.trade_no);case 2:e=a.sent,!0===e.data&&(t.$message.success(t.$t("订单已取消")),t.getOrderData());case 4:case"end":return a.stop()}}),a)})));function e(){return a.apply(this,arguments)}return e}()});case 2:case"end":return a.stop()}}),a)})))()},onCallPay:function(){var t=this;return Object(i["a"])(Object(s["a"])().mark((function a(){var e,n;return Object(s["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return window.conso1e.log(167),a.next=3,Object(c["b"])(t.orderData.trade_no,t.payType);case 3:e=a.sent,1===e.type?(n=e.data,window.location.href=n):0===e.type?t.$router.replace({path:"/pay/qrcode",query:{img:encodeURIComponent(e.data),orderNo:t.orderData.trade_no}}):-1===e.type&&(t.$message.success(t.$t("支付成功")),t.getOrderData());case 5:case"end":return a.stop()}}),a)})))()}}},p=v,f=(e("4d6b"),e("2877")),_=Object(f["a"])(p,n,r,!1,null,"f02751dc",null);a["default"]=_.exports},"98ab":function(t,a,e){},a1fc:function(t,a,e){"use strict";e.d(a,"c",(function(){return r})),e.d(a,"b",(function(){return s})),e.d(a,"a",(function(){return i}));e("4de4"),e("d3b7"),e("b64b"),e("7db0"),e("99af"),e("ac1f"),e("a15b"),e("d81d");var n=e("12cb"),r=[{key:"month_price",label:n["a"].t("每月"),label2:n["a"].t("月付")},{key:"quarter_price",label:n["a"].t("每季度"),label2:n["a"].t("季付")},{key:"half_year_price",label:n["a"].t("每半年"),label2:n["a"].t("半年付")},{key:"year_price",label:n["a"].t("每年"),label2:n["a"].t("年付")},{key:"two_year_price",label:n["a"].t("每两年"),label2:n["a"].t("两年付")},{key:"three_year_price",label:n["a"].t("每三年"),label2:n["a"].t("三年付")},{key:"onetime_price",label:n["a"].t("一次性"),label2:n["a"].t("一次性付")}];function s(t){var a=r.filter((function(a){return null!==t[a.key]})),e=null,s="";try{e=JSON.parse(t.content)}catch(d){}if(e){var i,c=null===(i=e.find((function(t){return t.label})))||void 0===i?void 0:i.label;c&&(s='<div class="t0" style="color: '.concat(c.textColor,"; background-color: ").concat(c.background,'">').concat(c.text,"</div>"))}else{var o;s=null===(o=/<div\s+class="t0.*?".*?>(.*)<\/div>/gi.exec(t.content))||void 0===o?void 0:o[0]}var u=function(){return s||(null!==t.capacity_limit&&t.capacity_limit<10?t.capacity_limit<=0?'<div class="t0">'.concat(n["a"].t("已售罄"),"</div>"):'<div class="t0">'.concat(n["a"].t("即将售罄"),"</div>"):"")},l=u();return{types:a,value:t[a[0].key],label:a[0].label,label2:a[0].label2,tagTitle:l}}function i(t){var a=null;try{a=JSON.parse(t.content)}catch(n){}if(a){var e=a.filter((function(t){return t.feature}));return e.map((function(t){return'\n        <div class="t4">\n          <div class="desc">\n            <i class="'.concat(t.support?"gou":"cha",'"></i>\n            ').concat(t.feature,"\n          </div>\n        </div>\n      ")})).join("")}return t.content}},bee2:function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));var n=e("a38e");function r(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Object(n["a"])(r.key),r)}}function s(t,a,e){return a&&r(t.prototype,a),e&&r(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}},c678:function(t,a,e){"use strict";e.d(a,"d",(function(){return s})),e.d(a,"c",(function(){return i})),e.d(a,"e",(function(){return c})),e.d(a,"a",(function(){return o})),e.d(a,"b",(function(){return u})),e.d(a,"f",(function(){return l}));e("99af");var n=e("54d7"),r=e("8c8a");function s(){return Object(r["a"])({url:n["l"]+"/api/v1/user/order/fetch",method:"get"})}function i(t){return Object(r["a"])({url:n["l"]+"/api/v1/user/order/detail?trade_no=".concat(t),method:"get"})}function c(){return Object(r["a"])({url:n["l"]+"/api/v1/user/order/getPaymentMethod",method:"get"})}function o(t){return Object(r["a"])({url:n["l"]+"/api/v1/user/order/cancel?trade_no=".concat(t),method:"post"})}function u(t,a){return Object(r["a"])({url:n["l"]+"/api/v1/user/order/checkout?trade_no=".concat(t,"&method=").concat(a),method:"post"})}function l(t){return Object(r["a"])({url:n["l"]+"/api/v1/user/order/check?trade_no=".concat(t),method:"get"})}},d4ec:function(t,a,e){"use strict";e.d(a,"a",(function(){return n}));e("d9e2");function n(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}},d81d:function(t,a,e){"use strict";var n=e("23e7"),r=e("b727").map,s=e("1dde"),i=s("map");n({target:"Array",proto:!0,forced:!i},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);